好的，以下是 PocketSpeak V1.6 - 用户语音评分系统 的剩余部分内容，包括：

⸻

📄 1. DeepSeek Prompt 模板文件内容

📄 存放路径：backend_claude_memory/prompts/deepseek_speech_feedback_prompt.txt

# 🎯 任务指令（请勿修改）
你是一位专业的英语语音评分老师，请根据以下句子内容，评估用户英语表达的准确性、流畅性和地道程度，并返回结构化结果。

## 句子内容：
{sentence}

## 要求：
请从以下三个维度评分，并返回标准 JSON 格式结果：

1. 语法分析（grammar）：
- 判断句子是否有语法错误（true/false）
- 若有错误，请指出原句、建议句子和错误原因

2. 发音评分（pronunciation）：
- 给出发音整体分数（0-100）
- 给出每个单词的发音状态（"good", "bad", "needs_improvement"）
- 分别给出流利度、清晰度、完整度（0-100）
- 推测语速（单位：词/分钟）

3. 表达地道程度（expression）：
- 是否地道表达（"不地道", "一般", "地道", "非常地道"）
- 若表达不够地道，请给出优化建议及原因说明

## 返回格式（务必返回标准 JSON）：
{
  "grammar": {
    "has_error": true,
    "original": "What is hobbies?",
    "suggestion": "What are your hobbies?",
    "reason": "hobbies 为复数，应搭配 are，而不是 is"
  },
  "pronunciation": {
    "score": 89,
    "words": [
      {"word": "What", "status": "good"},
      {"word": "is", "status": "good"},
      {"word": "hobbies", "status": "bad"}
    ],
    "fluency": 96,
    "clarity": 88,
    "completeness": 100,
    "speed_wpm": 102
  },
  "expression": {
    "level": "地道",
    "suggestion": "What are your hobbies?",
    "reason": "标准美式问法，更自然"
  },
  "overall_score": 91
}


⸻

🧾 2. Claude 工作日志建议路径

每次 Claude 执行评分系统相关任务（开发/修复/优化）时，请使用以下日志命名模板：

📁 存放路径：claude_workspace/

📄 命名示例：20251023_task_speech_eval_api_v1.md

模板引用：
📄 claude_memory/specs/worklog_template.md

⸻

🧭 3. 项目目录结构更新建议（节选）

📦 pocketspeak/
├── backend/
│   ├── services/
│   │   └── speech_eval/                     # 新增评分服务模块
│   │       ├── eval_service.py              # 核心评分服务逻辑
│   │       └── deepseek_client.py           # 封装 DeepSeek API 请求逻辑
│   ├── routers/
│   │   └── speech_eval_router.py            # 注册路由 /api/eval/speech-feedback
│   └── models/
│       └── speech_eval_models.py            # 数据模型定义（Pydantic）
│
├── frontend/
│   └── lib/
│       └── components/
│           ├── speech_score_card.dart       # 主评分卡片组件
│           ├── pronunciation_modal.dart     # 发音详情弹窗
│           ├── grammar_modal.dart           # 语法建议弹窗
│           └── expression_modal.dart        # 表达优化弹窗


