

ğŸ¤– Claude Prompt â€” V1.4 ç”¨æˆ·ä¸»é¡µä¸è®¾ç½®é¡µåç«¯åŠŸèƒ½å¼€å‘

ğŸ¯ æœ¬ä»»åŠ¡ç›®æ ‡æ˜¯ä¸º PocketSpeak App çš„åº•éƒ¨èœå•ç³»ç»Ÿï¼ˆå­¦ä¹ é¡µã€æˆ‘çš„é¡µã€è®¾ç½®é¡µï¼‰æä¾›åç«¯æ¥å£æ”¯æŒï¼ŒåŒ…å«ç”¨æˆ·åŸºç¡€ä¿¡æ¯ã€å­¦ä¹ ç»Ÿè®¡æ•°æ®ã€è®¾ç½®é¡¹æ¥å£ç­‰ã€‚

â¸»

âœ… ä¸€ã€ä½ çš„ä»»åŠ¡ç›®æ ‡

ä½ å°†è´Ÿè´£å®ç°ä»¥ä¸‹æ¥å£ï¼Œå¹¶ç¡®ä¿ç¬¦åˆ RESTful è§„èŒƒï¼Œæ‰€æœ‰æ¥å£éœ€åŸºäº FastAPI å®ç°ï¼Œå¹¶ä½¿ç”¨å·²æœ‰çš„ç”¨æˆ·èº«ä»½è®¤è¯æœºåˆ¶ã€‚

â¸»

ğŸ“Œ äºŒã€å…·ä½“æ¥å£è®¾è®¡

1. è·å–ç”¨æˆ·åŸºç¡€ä¿¡æ¯

GET /api/user/info

ç”¨é€”ï¼šè¿”å›ç”¨æˆ·å¤´åƒã€æ˜µç§°ã€å½“å‰è‹±è¯­æ°´å¹³ç­‰çº§ç­‰åŸºæœ¬èµ„æ–™

è¿”å›ç¤ºä¾‹ï¼š

{
  "user_id": "u123456",
  "nickname": "Alex",
  "avatar_url": "https://cdn.pocketspeak.ai/avatar/123.jpg",
  "level": "B1",
  "level_label": "ä¸­çº§",
  "email": "alex@example.com"
}


â¸»

2. è·å–ä»Šæ—¥å­¦ä¹ ç»Ÿè®¡æ•°æ®

GET /api/user/stats/today

ç”¨é€”ï¼šè¿”å›ä»Šæ—¥å­¦ä¹ æ€»æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ã€è‡ªç”±å¯¹è¯æ¬¡æ•°ã€å¥å­è·Ÿè¯»æ¬¡æ•°ç­‰

è¿”å›ç¤ºä¾‹ï¼š

{
  "date": "2025-09-29",
  "study_minutes": 42,
  "free_talk_count": 3,
  "sentence_repeat_count": 5
}

ğŸ”§ æš‚æ—¶ä½¿ç”¨ mock æ•°æ®ï¼Œåç»­æ¥å…¥å­¦ä¹ è®°å½•æ¨¡å—è¡¥å…¨

â¸»

3. è·å–è®¾ç½®é¡µé¢å±•ç¤ºå†…å®¹

GET /api/user/settings

ç”¨é€”ï¼šè¿”å›è®¾ç½®é¡µé¢ä¸­å¯ç”¨çš„è®¾ç½®é¡¹é…ç½®ï¼ˆæ”¯æŒåæœŸåŠ¨æ€å¼€å…³ï¼‰

è¿”å›ç¤ºä¾‹ï¼š

{
  "account_enabled": true,
  "show_terms": true,
  "show_privacy": true,
  "logout_enabled": true
}


â¸»

4. ç”¨æˆ·é€€å‡ºç™»å½•æ¥å£

POST /api/user/logout

ç”¨é€”ï¼šç”¨äºå®¢æˆ·ç«¯é€€å‡ºç™»å½•ï¼Œåç«¯æ¸…ç† token / session

è¿”å›ï¼šæ ‡å‡†æ“ä½œæˆåŠŸçŠ¶æ€ { "success": true }

â¸»

ğŸ§© ä¸‰ã€æ•°æ®æ¨¡å‹ä¸å­˜å‚¨è¯´æ˜

è¯·åˆ›å»ºæˆ–æ‰©å±•ä»¥ä¸‹æ¨¡å—ï¼š

æ¨¡å—	è¯´æ˜
models/user_model.py	å®šä¹‰ UserInfo, UserStats æ•°æ®ç»“æ„
services/user_service.py	å°è£…è·å–ç”¨æˆ·ä¿¡æ¯ã€ç»Ÿè®¡æ•°æ®çš„é€»è¾‘
routers/user_router.py	æ·»åŠ å¯¹åº”çš„ API è·¯ç”±å®šä¹‰
schemas/user_schemas.py	ä½¿ç”¨ Pydantic å®šä¹‰æ¥å£è¯·æ±‚ä¸è¿”å›æ¨¡å‹


â¸»

âœ… å››ã€è®¤è¯è¦æ±‚
	â€¢	æ‰€æœ‰æ¥å£éƒ½å¿…é¡»ä½¿ç”¨ç°æœ‰ JWT Token éªŒè¯ç”¨æˆ·èº«ä»½ï¼ˆå‚è€ƒ /api/user/me å®ç°æ–¹å¼ï¼‰
	â€¢	æœªç™»å½•çŠ¶æ€ä¸‹è¯·æ±‚éœ€è¿”å› HTTP 401 Unauthorized

â¸»

ğŸ§ª äº”ã€æµ‹è¯•è¯´æ˜

è¯·ç¼–å†™å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶ tests/test_user_dashboard.pyï¼Œè¦†ç›–ä»¥ä¸‹ç”¨ä¾‹ï¼š
	â€¢	è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå·²ç™»å½• / æœªç™»å½•ï¼‰
	â€¢	è·å–å­¦ä¹ æ•°æ®ï¼ˆMock è¿”å›ï¼‰
	â€¢	è·å–è®¾ç½®é¡¹å†…å®¹
	â€¢	æ­£å¸¸é€€å‡ºç™»å½•

â¸»

ğŸ“ å…­ã€ç›®å½•ç»“æ„å»ºè®®

backend/
â”œâ”€â”€ routers/
â”‚   â””â”€â”€ user_router.py
â”œâ”€â”€ services/
â”‚   â””â”€â”€ user_service.py
â”œâ”€â”€ models/
â”‚   â””â”€â”€ user_model.py
â”œâ”€â”€ schemas/
â”‚   â””â”€â”€ user_schemas.py
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_user_dashboard.py


â¸»

ğŸ§  ä¸ƒã€é¢å¤–æç¤º
	â€¢	æ‰€æœ‰å­—æ®µå‘½åéœ€ç¬¦åˆ snake_case ä¸ Pydantic è§„èŒƒ
	â€¢	ç”¨æˆ·ç­‰çº§ï¼ˆå¦‚ A1~C2ï¼‰åº”åŒ…å«å¯è¯»åç§°ï¼ˆå¦‚ â€œå…¥é—¨â€ã€â€œä¸­çº§â€ï¼‰
	â€¢	è¯·ç¡®ä¿æ¥å£æ³¨é‡Šå®Œæ•´ã€è·¯å¾„åˆç†ã€å‘½åç»Ÿä¸€

