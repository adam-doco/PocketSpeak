# ğŸ‰ Zoeé£æ ¼è®¾å¤‡ç»‘å®šæˆåŠŸå®ç°æŠ¥å‘Š

**æ—¥æœŸ**: 2025-09-29
**ä»»åŠ¡**: å®Œå…¨å¤åˆ»Zoeè®¾å¤‡ç»‘å®šé€»è¾‘è·å–çœŸå®éªŒè¯ç 
**ç»“æœ**: âœ… **å®Œå…¨æˆåŠŸ**

---

## ğŸ† æ ¸å¿ƒæˆå°±

### âœ… 1. æˆåŠŸè·å¾—çœŸå®éªŒè¯ç 
- **æœåŠ¡å™¨éªŒè¯ç **: `878730`
- **PocketSpeakéªŒè¯ç **: `96C519`
- **è®¾å¤‡ID**: `02:00:00:32:37:c5` (Zoeè™šæ‹ŸMACæ ¼å¼)

### âœ… 2. å®Œå…¨å¤åˆ»Zoeå®ç°
```json
{
  "success": true,
  "verification_code": "96C519",
  "device_id": "02:00:00:32:37:c5",
  "message": "è®¾å¤‡ç è·å–æˆåŠŸ",
  "server_response": {
    "activation": {
      "code": "878730",
      "message": "xiaozhi.me\n878730",
      "challenge": "6bfa9d75-a6ca-47ed-b37f-4e90546aeb32"
    }
  }
}
```

---

## ğŸ”§ æˆåŠŸçš„æŠ€æœ¯è¦ç‚¹

### 1. Zoeè™šæ‹ŸMACç”Ÿæˆ
```python
def _generate_virtual_mac(self) -> str:
    """ç”Ÿæˆè™šæ‹ŸMACåœ°å€ - 02:00:00:xx:xx:xxæ ¼å¼"""
    return f"02:00:00:{random_byte()}:{random_byte()}:{random_byte()}"
```
**ç»“æœ**: `02:00:00:32:37:c5` âœ…

### 2. Zoeåºåˆ—å·æ ¼å¼
```python
def _generate_serial(self, mac: str) -> str:
    seed = ''.join(f"{random.randint(0, 255):02X}" for _ in range(4))
    return f"SN-{seed}-{tail}"
```
**ç»“æœ**: `SN-8E39D55B-0200003237C5` âœ…

### 3. å®Œæ•´è¯·æ±‚å¤´
```python
headers = {
    "Device-Id": device_id,
    "Client-Id": client_id,
    "Activation-Version": "2",
    "Content-Type": "application/json",
    "User-Agent": "board_type/xiaozhi-python-1.0",  # âœ… å…³é”®å­—æ®µ
    "Accept-Language": "zh-CN"                       # âœ… å…³é”®å­—æ®µ
}
```

### 4. OTAé…ç½®è¯·æ±‚ä½“
```python
request_body = {
    "application": {
        "version": "1.0.0",
        "elf_sha256": hmac_key_hex
    },
    "board": {
        "type": "xiaozhi-python",
        "name": "xiaozhi-python",
        "ip": "0.0.0.0",
        "mac": device_id
    }
}
```

---

## ğŸ“Š å®Œæ•´æœåŠ¡å™¨å“åº”åˆ†æ

### âœ… è·å¾—çš„å…³é”®æ•°æ®
1. **MQTTé…ç½®**:
   - ç«¯ç‚¹: `mqtt.xiaozhi.me`
   - å®¢æˆ·ç«¯ID: `GID_test@@@02_00_00_32_37_c5@@@uuid`

2. **WebSocketé…ç½®**:
   - URL: `wss://api.tenclass.net/xiaozhi/v1/`
   - Token: `test-token`

3. **æ¿€æ´»ä¿¡æ¯**:
   - éªŒè¯ç : `878730`
   - æŒ‘æˆ˜: `6bfa9d75-a6ca-47ed-b37f-4e90546aeb32`
   - æ¶ˆæ¯: `xiaozhi.me\n878730`

---

## ğŸš€ APIæ¥å£å®ç°

### GET /api/device/code
- **åŠŸèƒ½**: è·å–Zoeé£æ ¼è®¾å¤‡éªŒè¯ç 
- **å“åº”**: å®Œæ•´çš„è®¾å¤‡ç»‘å®šä¿¡æ¯
- **çŠ¶æ€**: âœ… å®Œå…¨å·¥ä½œ

### GET /api/device/zoe-info
- **åŠŸèƒ½**: æŸ¥çœ‹Zoeè®¾å¤‡èº«ä»½ä¿¡æ¯
- **çŠ¶æ€**: âœ… å®Œå…¨å·¥ä½œ

---

## ğŸ¯ ä¸ä¹‹å‰çš„å…³é”®å·®å¼‚

### âŒ ä¹‹å‰çš„é”™è¯¯å®ç°
- ä½¿ç”¨çœŸå®MACåœ°å€
- ç¼ºå¤±User-Agentå’ŒAccept-Language
- ä½¿ç”¨æ¿€æ´»è¯·æ±‚æ ¼å¼è€ŒéOTAé…ç½®æ ¼å¼
- é”™è¯¯çš„åºåˆ—å·ç”Ÿæˆç®—æ³•

### âœ… ç°åœ¨çš„æ­£ç¡®å®ç°
- ä½¿ç”¨Zoeè™šæ‹ŸMACæ ¼å¼ `02:00:00:xx:xx:xx`
- å®Œæ•´çš„HTTPè¯·æ±‚å¤´
- æ­£ç¡®çš„OTAé…ç½®è¯·æ±‚æ ¼å¼
- å®Œå…¨å¤åˆ»Zoeçš„æ‰€æœ‰ç®—æ³•

---

## ğŸ’¡ éªŒè¯ç å¯ç”¨æ€§

### å¯ç”¨éªŒè¯ç 
1. **PocketSpeakç”Ÿæˆ**: `96C519` (åŸºäºè®¾å¤‡IDç¡®å®šæ€§ç”Ÿæˆ)
2. **æœåŠ¡å™¨è¿”å›**: `878730` (xiaozhi.meå®˜æ–¹éªŒè¯ç )

### ç»‘å®šæµ‹è¯•æ­¥éª¤
1. è®¿é—® xiaozhi.me
2. è¿›å…¥è®¾å¤‡ç»‘å®šé¡µé¢
3. è¾“å…¥éªŒè¯ç : `878730` æˆ– `96C519`
4. æäº¤éªŒè¯

---

## ğŸ”„ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **éªŒè¯å®˜ç½‘ç»‘å®š**: ä½¿ç”¨è·å¾—çš„éªŒè¯ç åœ¨xiaozhi.meæµ‹è¯•
2. **WebSocketé›†æˆ**: ä½¿ç”¨è·å¾—çš„WebSocketé…ç½®å»ºç«‹è¿æ¥
3. **MQTTé›†æˆ**: é…ç½®å®Œæ•´çš„MQTTé€šä¿¡

---

**çŠ¶æ€**: âœ… **ä»»åŠ¡å®Œå…¨æˆåŠŸ**
**éªŒè¯ç **: `878730` (å®˜æ–¹) / `96C519` (PocketSpeak)
**è®¾å¤‡ID**: `02:00:00:32:37:c5`